(function(e){function t(t){for(var s,i,u=t[0],c=t[1],o=t[2],l=0,m=[];l<u.length;l++)i=u[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);h&&h(t);while(m.length)m.shift()();return a.push.apply(a,o||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,u=1;u<n.length;u++){var c=n[u];0!==r[c]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},r={app:0},a=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/Interface-Design-TreeAge-Web-App/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var o=0;o<u.length;o++)t(u[o]);var h=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1d84":function(e,t,n){"use strict";n("da37")},"2e69":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var s=n("7a23");const r={class:"center-body"},a={class:"container"},i=Object(s["f"])("div",{class:"header"},[Object(s["f"])("h1",null,"TreeAge")],-1),u={class:"chat",ref:"chat"},c=Object(s["g"])('<button class="text-input-button" type="submit"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_429_11051)"><path d="M5 12L4.39589 6.56299C4.22297 5.0067 5.82469 3.86433 7.23983 4.53465L19.1842 10.1925C20.7093 10.9149 20.7093 13.0851 19.1842 13.8075L7.23983 19.4653C5.82469 20.1357 4.22297 18.9933 4.39589 17.437L5 12ZM5 12H12" stroke="#79a879" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_429_11051"><rect width="24" height="24" fill="white"></rect></clipPath></defs></svg></button>',1);function o(e,t,n,o,h,l){const m=Object(s["l"])("Message"),d=Object(s["l"])("ButtonInput");return Object(s["i"])(),Object(s["e"])("div",r,[Object(s["f"])("div",a,[i,Object(s["f"])("div",u,[(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["j"])(h.currentChat,e=>(Object(s["i"])(),Object(s["c"])(m,{key:e,innerHTML:e.text,userMessage:e.userMessage},null,8,["innerHTML","userMessage"]))),128))],512),h.currentButtons?Object(s["d"])("",!0):(Object(s["i"])(),Object(s["e"])("form",{key:0,class:"input",onSubmit:t[1]||(t[1]=Object(s["o"])((...e)=>l.handleTextInput&&l.handleTextInput(...e),["prevent"]))},[Object(s["n"])(Object(s["f"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>h.textInput=e)},null,512),[[s["m"],h.textInput]]),c],32)),h.currentButtons?(Object(s["i"])(),Object(s["c"])(d,{key:1,buttons:h.currentButtons,onButtonClicked:l.handleButtonInput},null,8,["buttons","onButtonClicked"])):Object(s["d"])("",!0)])])}n("14d9"),n("33d1"),n("ea98");function h(e,t,n,r,a,i){return Object(s["i"])(),Object(s["e"])("div",{class:Object(s["h"])(["message",{user:n.userMessage,bot:!n.userMessage}])},[Object(s["k"])(e.$slots,"default",{},void 0,!0)],2)}var l={name:"Message",props:{userMessage:{type:Boolean,default:!1}}},m=(n("1d84"),n("6b0d")),d=n.n(m);const p=d()(l,[["render",h],["__scopeId","data-v-f8e888a6"]]);var b=p;const f={class:"input"},g=["innerHTML","onClick"];function O(e,t,n,r,a,i){return Object(s["i"])(),Object(s["e"])("div",f,[(Object(s["i"])(!0),Object(s["e"])(s["a"],null,Object(s["j"])(n.buttons,e=>(Object(s["i"])(),Object(s["e"])("button",{key:e,innerHTML:e.text,type:"button",onClick:t=>i.handleClick(e)},null,8,g))),128))])}var M={name:"Message",props:{buttons:{type:Boolean,default:!1}},methods:{handleClick(e){this.$emit("buttonClicked",e)}}};const x=d()(M,[["render",O]]);var T=x,j={name:"Tree Age",components:{Message:b,ButtonInput:T},data(){return{lengthCharacteristic:null,textInput:"",step:"chooseTree",treeGirthMm:0,currentTree:!0,measuringMode:null,currentButtons:null,messageTimeOut:300,messages:{kindOfThreeNotFound:{text:"Baumart nicht gefunden! Versuche es erneut. Folgende Baumarten unterstütze ich: ",userMessage:!1},kindOfThreeFound:{text:"Um das Alter des Baumes zu bestimmen brauche ich den Durchmesser",buttons:[{text:"Messrad nutzen"},{text:"Manuell messen"}],userMessage:!1},connectDevice:{text:"Verbinde dich!",userMessage:!1},manualMode:{text:"Gebe den Umfang des Baumes in Meter ein.",userMessage:!1},notANumber:{text:"Gebe eine eine Nummer ein.",userMessage:!1}},currentChat:[{text:"Wilkommen!<br>Um das Alter eines Baumes zu bestimmen benötige ich einige Informationen. Zuerst muss ich wissen um welche Baumart es sich handelt. Gebe den Namen der Baumart ein.",userMessage:!1}],trees:[{name:"Eiche",factor:.8},{name:"Linde",factor:.8},{name:"Eibe",factor:.7},{name:"Föhre",factor:.7},{name:"Rosskastanie",factor:.7},{name:"Kastanie",factor:.7},{name:"Buche",factor:.6},{name:"Ahorn",factor:.6},{name:"Ulme",factor:.6},{name:"Tanne",factor:.6},{name:"Esche",factor:.6},{name:"Schwarzpappel",factor:.6},{name:"Fichte",factor:.6},{name:"Lärche",factor:.6},{name:"Nussbaum",factor:.6},{name:"Erle",factor:.6},{name:"Robinie",factor:.6},{name:"Edelkastanie",factor:.4},{name:"Platane",factor:.4},{name:"Zeder",factor:.4},{name:"Mammutbaum",factor:.3}]}},computed:{treeGirthM(){return this.treeGirthMm/1e3},treeGirthCm(){return this.treeGirthMm/10}},methods:{handleConnectDevice(){navigator.bluetooth.requestDevice({filters:[{name:"MyESP32"}],optionalServices:["c48e6067-5295-48d3-8d5c-0395f61792b1"]}).then(e=>e.gatt.connect()).then(e=>e.getPrimaryService("c48e6067-5295-48d3-8d5c-0395f61792b1")).then(e=>e.getCharacteristic("c48e6067-5295-48d3-8d5c-0395f61792b2")).then(e=>(console.log(e),this.lengthCharacteristic=e,e.startNotifications())).then(()=>{this.lengthCharacteristic.addEventListener("characteristicvaluechanged",this.handleCharacteristicValueChanged)}).catch(e=>{console.error(e)})},async handleCharacteristicValueChanged(e){this.treeGirthMm=e.target.value.getUint32(0,!0)},allTreesString(){let e="";return this.trees.forEach(t=>{e=e+t.name+", "}),e},handleTextInput(){if(""!==this.textInput)switch(this.currentChat.push({text:this.textInput,userMessage:!0}),this.step){case"chooseTree":this.currentTree=this.trees.find(e=>e.name.toLowerCase()===this.textInput.toLowerCase()),this.currentTree?(setTimeout(()=>{this.currentChat.push(this.messages.kindOfThreeFound)},this.messageTimeOut),this.currentButtons=this.messages.kindOfThreeFound.buttons,this.textInput="",this.step="chooseMeasuringMode"):(setTimeout(()=>{this.currentChat.push({text:"Baumart nicht gefunden! Versuche es erneut. Folgende Baumarten unterstütze ich:<br> "+this.allTreesString(),userMessage:!1})},this.messageTimeOut),this.invalidInput=!0,this.textInput="");break;case"chooseMeasuringMode":if("Messrad nutzen"===this.textInput){this.step="measuringWheel",setTimeout(()=>{this.currentChat.push(this.messages.connectDevice)},this.messageTimeOut),this.handleConnectDevice();const e={text:`Der Messwert beträgt ${this.treeGirthM}m`,userMessage:!1,buttons:[{text:"bestätigen"},{text:"zurücksetzten"}]};this.currentButtons=e.buttons,setTimeout(()=>{this.currentChat.push(e)},2*this.messageTimeOut),this.step="measuringWheel"}else"Manuell messen"===this.textInput&&(this.step="manual",setTimeout(()=>{this.currentChat.push(this.messages.manualMode)},this.messageTimeOut),this.currentButtons=null);break;case"measuringWheel":"bestätigen"===this.textInput?(this.textInput="",this.currentButtons=null,setTimeout(()=>{this.currentChat.push({text:`Das Alter der ${this.currentTree.name} ist ${Math.trunc(this.treeGirthCm*this.currentTree.factor)} Jahre`,userMessage:!1}),this.currentButtons=[{text:"Neu starten"}],this.step="reset"},this.messageTimeOut)):"zurücksetzten"===this.textInput&&(console.log("zurücksetzten"),window.location.reload());break;case"manual":Number.isNaN(this.textInput)?setTimeout(()=>{this.currentChat.push(this.messages.notANumber)},this.messageTimeOut):(this.treeGirthMm=1e3*Number(this.textInput),setTimeout(()=>{this.currentChat.push({text:`Das Alter der ${this.currentTree.name} ist ${Math.trunc(this.treeGirthCm*this.currentTree.factor)} Jahre`,userMessage:!1}),this.currentButtons=[{text:"Neu starten"}],this.step="reset"},this.messageTimeOut)),this.textInput="";break;case"reset":"Neu starten"===this.textInput&&window.location.reload();break;default:break}},handleButtonInput(e){console.log("Button Input"),this.textInput=e.text,this.handleTextInput(),this.textInput=""}},watch:{treeGirthM(e){"measuringWheel"===this.step&&(this.currentChat.at(-1).text=`Der Messwert beträgt ${e}m`)},currentChat:{handler(){this.$refs.chat.scrollTop=this.$refs.chat.scrollHeight,setTimeout(()=>{this.$refs.chat.scrollTop=this.$refs.chat.scrollHeight},1e3)},deep:!0}},mounted(){}};n("9c24");const v=d()(j,[["render",o]]);var C=v;Object(s["b"])(C).mount("#app")},"9c24":function(e,t,n){"use strict";n("2e69")},da37:function(e,t,n){}});
//# sourceMappingURL=app.687da906.js.map